(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{4328:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return n(6797)}])},6797:function(e,s,n){"use strict";n.r(s);var r=n(5893),d=n(7294),i=n(8945),l=n(1163),c=n(5005),t=n(381),a=n.n(t);n(4470);var h=n(7977),o=n(8129),x=n(5559),j=n(8055),m=n(6946),u=n(6354),T=n(6557),f=n(4304),p=n(6526),b=n(5421),g=n(8650),_=n(577),v=n(204),w=n(987),N=n(3948),C=n(4416),y=n(7126),k=n(7889),S=n(1078),E=n(623),M=n(1004),Z=n(333),I=n(9558);let L=()=>{a().locale("fr");let e=(0,l.useRouter)(),[s,n]=(0,d.useState)([]),[t,L]=(0,d.useState)([]),[O,Y]=(0,d.useState)(),z=()=>{localStorage.setItem("login","false"),e.push("/admin")},A=async()=>{let{data:s}=await i.Z.get("/back/devis/getAll"),r=await localStorage.getItem("login");r&&"false"!==r?(L(s.reverse()),n(s.reverse())):(Y("Veuillez vous connecter pour obtenir des donn\xe9es !"),e.push("/admin"))};(0,d.useEffect)(()=>{A()},[]);let P=async e=>{await i.Z.patch("/back/devis/update/".concat(e),{headers:{"Content-Type":"application/json"}});let s=[...t],r=s.findIndex(s=>s._id==e),d=s.find(s=>s._id==e);d.is_done=!0,s[r]=d,n(s),L(s)},V=e=>{let s=[...t];n(s=s.filter(s=>s.message.toLowerCase().indexOf(e.toLowerCase())>-1||s.nom.toLowerCase().indexOf(e.toLowerCase())>-1))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"btn btn-primary mt-5",onClick:()=>n([...s].reverse()),children:"Inverser par date"})}),(0,r.jsx)("div",{children:(0,r.jsx)(o.I,{placeholder:"Recherche",className:"form-control mt-5",type:"search",onChange:e=>V(e.target.value)})}),(0,r.jsx)("div",{children:(0,r.jsx)(c.Z,{className:"btn btn-danger mt-5 d-flex justify-content-end",onClick:()=>z(),children:"Se d\xe9connecter"})})]}),O?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(x.b,{status:"error",children:[(0,r.jsx)(j.z,{}),(0,r.jsx)(m.C,{children:O})]})}):(0,r.jsx)(u.x,{children:(0,r.jsxs)(T.i,{variant:"simple",children:[(0,r.jsx)(f.h,{children:(0,r.jsxs)(p.Tr,{children:[(0,r.jsx)(b.Th,{children:"#"}),(0,r.jsx)(b.Th,{children:"Nom"}),(0,r.jsx)(b.Th,{children:"Prenom"}),(0,r.jsx)(b.Th,{children:"Email"}),(0,r.jsx)(b.Th,{children:"Code postal"}),(0,r.jsx)(b.Th,{children:"Adresse"}),(0,r.jsx)(b.Th,{children:"Ville"}),(0,r.jsx)(b.Th,{children:"Natel"}),(0,r.jsx)(b.Th,{children:"Produit"}),(0,r.jsx)(b.Th,{children:"Message"}),(0,r.jsx)(b.Th,{onClick:()=>n([...s].reverse()),children:"Date"}),(0,r.jsx)(b.Th,{children:"Termin\xe9"}),(0,r.jsx)(b.Th,{children:"Marqu\xe9 Termin\xe9e"})]})}),(0,r.jsx)(g.p,{className:"w-100",children:s.map((e,s)=>(0,r.jsxs)(p.Tr,{children:[(0,r.jsx)(_.Td,{children:s+1}),(0,r.jsxs)(_.Td,{children:[e.nom," "]}),(0,r.jsx)(_.Td,{children:e.prenom}),(0,r.jsx)(_.Td,{children:e.email}),(0,r.jsx)(_.Td,{children:e.code_postal}),(0,r.jsx)(_.Td,{children:e.adresse}),(0,r.jsx)(_.Td,{children:e.ville}),(0,r.jsx)(_.Td,{children:e.natel}),(0,r.jsx)(_.Td,{children:(0,r.jsx)("textarea",{name:"",id:"",cols:"24",children:e.produit})}),(0,r.jsx)(_.Td,{children:(0,r.jsx)(v.k,{justifyContent:"center",mt:4,children:(0,r.jsxs)(w.J,{placement:"bottom",isLazy:!0,children:[(0,r.jsx)(N.x,{children:(0,r.jsx)(c.Z,{className:"btn btn-secondary",children:"Voir"})}),(0,r.jsxs)(C.y,{_focus:{boxShadown:"none"},children:[(0,r.jsx)(y.Q,{}),(0,r.jsx)(k.u,{}),(0,r.jsx)(S.Y,{fontWeight:"bold",children:"MESSAGE"}),(0,r.jsx)(E.b,{w:"full",children:(0,r.jsx)(M.m,{isLazy:!0,colorScheme:"green",children:(0,r.jsx)(Z.n,{children:(0,r.jsx)(I.x,{children:(0,r.jsx)("textarea",{name:"",id:"",cols:"28",rows:"10",children:e.message})})})})})]})]})})}),(0,r.jsx)(_.Td,{children:a()(e.createdAt).format("MMMM Do YYYY, h:mm:ss a")}),(0,r.jsx)(_.Td,{children:e.is_done?(0,r.jsx)(h.Z,{bg:"success",className:"table-secondary",children:"OUI"}):(0,r.jsx)(h.Z,{bg:"danger",children:"NON"})}),(0,r.jsx)(_.Td,{children:(0,r.jsx)(c.Z,{onClick:()=>P(e._id),children:"mettre \xe0 jour"})})]},s))})]})})]})};s.default=L}},function(e){e.O(0,[885,292,165,774,888,179],function(){return e(e.s=4328)}),_N_E=e.O()}]);